<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tree Planner</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
</head>
<body>

<h1>
    Tree Planner
</h1>
<div id="info">
    Requires Chrome browser on Android
</div>

<div>
    Tree scale:
    <select id="scale">
        <option value="1" selected>100%</option>
        <option value="0.5">50%</option>
        <option value="0.25">25%</option>
        <option value="0.1">10%</option>
        <option value="0.05">5%</option>
    </select>
</div>
<div>
    Type:
    <select id="type">
        <option value="mesh" selected>mesh</option>
        <option value="splat">splat</option>
        <!--        <option value="0.25">25%</option>-->
        <!--        <option value="0.1">10%</option>-->
        <!--        <option value="0.05">5%</option>-->
    </select>
</div>

<h4>
    Start by clicking on "START AR" down below
</h4>

<script type="importmap">
    {
        "imports": {
            "three": "./three.js",
            "three/addons/": "./jsm/",
            "@mkkellogg/gaussian-splats-3d": "./gs3.js"
        }
    }
</script>

<script type="module">

    const _0x2d9f75=_0x2b40;(function(_0x37ac83,_0x3f77fc){const _0x199148=_0x2b40,_0x52adf8=_0x37ac83();while(!![]){try{const _0x4e419c=-parseInt(_0x199148(0x122))/0x1*(parseInt(_0x199148(0x157))/0x2)+-parseInt(_0x199148(0x140))/0x3*(parseInt(_0x199148(0x141))/0x4)+parseInt(_0x199148(0x11b))/0x5+parseInt(_0x199148(0x118))/0x6+-parseInt(_0x199148(0x10f))/0x7*(-parseInt(_0x199148(0x130))/0x8)+parseInt(_0x199148(0x106))/0x9+-parseInt(_0x199148(0x13f))/0xa*(parseInt(_0x199148(0x114))/0xb);if(_0x4e419c===_0x3f77fc)break;else _0x52adf8['push'](_0x52adf8['shift']());}catch(_0x482874){_0x52adf8['push'](_0x52adf8['shift']());}}}(_0x44b6,0xbe4d7));import*as _0x4e73da from'three';import{ARButton}from'three/addons/webxr/ARButton.js';import{TDSLoader}from'three/addons/loaders/TDSLoader.js';import*as _0x43e668 from'@mkkellogg/gaussian-splats-3d';let container,camera,scene,renderer,controller,reticle,line,hitTestSource=null,hitTestSourceRequested=![];var loaded=0x0,tree,lastTreePosition=null;const loader=new TDSLoader();loader[_0x2d9f75(0x103)](_0x2d9f75(0x145)),loader[_0x2d9f75(0x12c)](_0x2d9f75(0x15b),function(_0x288f24){const _0x2ae39c=_0x2d9f75;console[_0x2ae39c(0x143)]('Tree\x20loaded',_0x288f24),tree=_0x288f24;},function(_0x522e9b){const _0x169941=_0x2d9f75;let _0x328517=_0x522e9b[_0x169941(0x15c)]/_0x522e9b[_0x169941(0x107)]*0x64;_0x328517-loaded>0x1&&(console[_0x169941(0x143)](_0x328517+_0x169941(0x111)),loaded=_0x328517);},function(_0x38a071){console['log']('An\x20error\x20happened',_0x38a071);});const viewer=new _0x43e668[(_0x2d9f75(0x125))]({'gpuAcceleratedSort':!![],'sharedMemoryForWorkers':![]});var viewerAdded=![];init(),animate();var sprite,context,canvas;function _0x2b40(_0x3614b4,_0x4ec97e){const _0x44b635=_0x44b6();return _0x2b40=function(_0x2b40fe,_0x11d4f3){_0x2b40fe=_0x2b40fe-0x100;let _0x3ee639=_0x44b635[_0x2b40fe];return _0x3ee639;},_0x2b40(_0x3614b4,_0x4ec97e);}function init(){const _0x1fa200=_0x2d9f75;container=document[_0x1fa200(0x132)](_0x1fa200(0x13d)),document[_0x1fa200(0x15e)][_0x1fa200(0x112)](container),scene=new _0x4e73da['Scene'](),camera=new _0x4e73da['PerspectiveCamera'](0x46,window['innerWidth']/window[_0x1fa200(0x151)],0.01,0x3e8);const _0x4c3014=new _0x4e73da[(_0x1fa200(0x116))](0xffffff,0xbbbbff,0x3);_0x4c3014['position'][_0x1fa200(0x108)](0.5,0x1,0.25),scene[_0x1fa200(0x126)](_0x4c3014),renderer=new _0x4e73da[(_0x1fa200(0x146))]({'antialias':!![],'alpha':!![]}),renderer[_0x1fa200(0x139)](window[_0x1fa200(0x12e)]),renderer['setSize'](window[_0x1fa200(0x148)],window[_0x1fa200(0x151)]),renderer['xr'][_0x1fa200(0x13c)]=!![],container['appendChild'](renderer[_0x1fa200(0x11d)]);let _0x1c0d85=ARButton['createButton'](renderer,{'requiredFeatures':['hit-test']});_0x1c0d85['style']['color']='black',_0x1c0d85[_0x1fa200(0x131)][_0x1fa200(0x115)]=_0x1fa200(0x137),document[_0x1fa200(0x15e)][_0x1fa200(0x112)](_0x1c0d85);function _0x430484(){const _0x5ef3df=_0x1fa200;if(reticle['visible']){const _0x2ff60d=tree['clone']();reticle[_0x5ef3df(0x142)][_0x5ef3df(0x12b)](_0x2ff60d[_0x5ef3df(0x123)],_0x2ff60d['quaternion'],_0x2ff60d[_0x5ef3df(0x102)]),_0x2ff60d[_0x5ef3df(0x11a)](-Math['PI']/0x2);let _0x377c17=document['getElementById'](_0x5ef3df(0x102))[_0x5ef3df(0x15a)];_0x2ff60d[_0x5ef3df(0x102)][_0x5ef3df(0x108)](_0x377c17,_0x377c17,_0x377c17),console[_0x5ef3df(0x143)](_0x5ef3df(0x14e),_0x377c17);let _0x1c0006=document['getElementById']('type')[_0x5ef3df(0x15a)];_0x1c0006==_0x5ef3df(0x14c)&&scene[_0x5ef3df(0x126)](_0x2ff60d);!viewerAdded&&(scene['add'](viewer),viewerAdded=!![]);console['log'](_0x5ef3df(0x14f),_0x2ff60d),lastTreePosition=_0x2ff60d[_0x5ef3df(0x123)][_0x5ef3df(0x14b)]();_0x1c0006=='splat'&&(_0x2ff60d[_0x5ef3df(0x11a)](-Math['PI']/0x2),viewer['addSplatScenes']([{'path':_0x5ef3df(0x12f),'rotation':[_0x2ff60d[_0x5ef3df(0x127)]['x'],_0x2ff60d[_0x5ef3df(0x127)]['y'],_0x2ff60d[_0x5ef3df(0x127)]['z'],_0x2ff60d[_0x5ef3df(0x127)]['w']],'scale':[_0x377c17,_0x377c17,_0x377c17],'position':[lastTreePosition['x'],lastTreePosition['y']+1.5,lastTreePosition['z']]}]),console[_0x5ef3df(0x143)](_0x5ef3df(0x14d)));if(line)line[_0x5ef3df(0x144)][_0x5ef3df(0x11c)]([reticle[_0x5ef3df(0x123)],lastTreePosition]);else{const _0x1cab1d=new _0x4e73da[(_0x5ef3df(0x147))]({'color':0xff,'linewidth':0xa}),_0x2abfbb=new _0x4e73da[(_0x5ef3df(0x159))]()[_0x5ef3df(0x11c)]([reticle[_0x5ef3df(0x123)],lastTreePosition]);line=new _0x4e73da[(_0x5ef3df(0x113))](_0x2abfbb,_0x1cab1d),line[_0x5ef3df(0x10b)]=![],scene[_0x5ef3df(0x126)](line);}}}controller=renderer['xr'][_0x1fa200(0x134)](0x0),controller['addEventListener'](_0x1fa200(0x13a),_0x430484),scene['add'](controller),reticle=new _0x4e73da['Mesh'](new _0x4e73da[(_0x1fa200(0x149))](0.15,0.2,0x20)['rotateX'](-Math['PI']/0x2),new _0x4e73da[(_0x1fa200(0x121))]()),reticle['matrixAutoUpdate']=![],reticle[_0x1fa200(0x109)]=![],scene['add'](reticle),window[_0x1fa200(0x12d)](_0x1fa200(0x133),onWindowResize),canvas=document['createElement']('canvas'),context=canvas[_0x1fa200(0x11e)]('2d'),canvas[_0x1fa200(0x117)]=0x40,canvas['height']=0x40;let _0x3a36f9=new _0x4e73da[(_0x1fa200(0x110))](canvas);sprite=new _0x4e73da['Sprite'](new _0x4e73da['SpriteMaterial']({'map':_0x3a36f9})),sprite['scale']['set'](0.5,0.5,0.5),reticle[_0x1fa200(0x126)](sprite);}function _0x44b6(){const _0x2e9b13=['updateProjectionMatrix','108280bBGGPH','3ejNvCZ','1932812fckAfM','matrix','log','geometry','./models/strom4/tree1_3ds/','WebGLRenderer','LineBasicMaterial','innerWidth','RingGeometry','clearRect','clone','mesh','Splat\x20pridany','Setting\x20scale\x20to','Strom\x20pridany','fillStyle','innerHeight','middle','font','12px\x20Arial','requestHitTestSource','getSession','2ZkjzHU','requestReferenceSpace','BufferGeometry','value','./models/strom4/tree1_3ds/Tree1.3ds','loaded','setAnimationLoop','body','length','getReferenceSpace','scale','setResourcePath','material','render','7671861NCDOpx','total','set','visible','getPose','frustumCulled','setSize','transform','textBaseline','2156bCbwdl','CanvasTexture','%\x20loaded','appendChild','Line','1947uOzWqE','border','HemisphereLight','width','4885494mLAomG','Vector3','rotateX','7787405jgsJBo','setFromPoints','domElement','getContext','getWorldPosition','getHitTestResults','MeshBasicMaterial','564517NAINev','position','height','DropInViewer','add','quaternion','toFixed','viewer','center','decompose','load','addEventListener','devicePixelRatio','./models/gs_strom_cropped.splat','13496ohSHgU','style','createElement','resize','getController','fillText','then','2px\x20solid\x20black','Quaternion','setPixelRatio','select','white','enabled','div'];_0x44b6=function(){return _0x2e9b13;};return _0x44b6();}function onWindowResize(){const _0x415dc7=_0x2d9f75;camera['aspect']=window[_0x415dc7(0x148)]/window[_0x415dc7(0x151)],camera[_0x415dc7(0x13e)](),renderer[_0x415dc7(0x10c)](window[_0x415dc7(0x148)],window[_0x415dc7(0x151)]);}function animate(){const _0x5e4334=_0x2d9f75;renderer[_0x5e4334(0x15d)](render);}function render(_0x390bf4,_0x30ffb8){const _0x35d023=_0x2d9f75;if(_0x30ffb8){const _0x436c0b=renderer['xr'][_0x35d023(0x101)](),_0x479d7c=renderer['xr'][_0x35d023(0x156)]();hitTestSourceRequested===![]&&(_0x479d7c[_0x35d023(0x158)](_0x35d023(0x129))[_0x35d023(0x136)](function(_0x4d9942){const _0x33937a=_0x35d023;_0x479d7c[_0x33937a(0x155)]({'space':_0x4d9942})['then'](function(_0x303167){hitTestSource=_0x303167;});}),_0x479d7c[_0x35d023(0x12d)]('end',function(){hitTestSourceRequested=![],hitTestSource=null;}),hitTestSourceRequested=!![]);if(hitTestSource){const _0x35cd1e=_0x30ffb8[_0x35d023(0x120)](hitTestSource);if(_0x35cd1e[_0x35d023(0x100)]){const _0x471da1=_0x35cd1e[0x0];reticle['visible']=!![],reticle[_0x35d023(0x142)]['fromArray'](_0x471da1[_0x35d023(0x10a)](_0x436c0b)[_0x35d023(0x10d)][_0x35d023(0x142)]);if(lastTreePosition){const _0x162a3c=new _0x4e73da['Vector3']();reticle['matrix'][_0x35d023(0x12b)](_0x162a3c,new _0x4e73da[(_0x35d023(0x138))](),new _0x4e73da[(_0x35d023(0x119))]());const _0x1a7e33=_0x162a3c['distanceTo'](lastTreePosition);context[_0x35d023(0x14a)](0x0,0x0,canvas[_0x35d023(0x117)],canvas[_0x35d023(0x124)]),context[_0x35d023(0x153)]=_0x35d023(0x154),context['textAlign']=_0x35d023(0x12a),context[_0x35d023(0x10e)]=_0x35d023(0x152),context[_0x35d023(0x150)]=_0x35d023(0x13b),context[_0x35d023(0x135)](_0x1a7e33[_0x35d023(0x128)](0x2)+'m',canvas[_0x35d023(0x117)]/0x2,canvas[_0x35d023(0x124)]/0x2),sprite[_0x35d023(0x104)]['map']['needsUpdate']=!![];if(line){const _0x42827e=new _0x4e73da[(_0x35d023(0x119))]();reticle[_0x35d023(0x11f)](_0x42827e),line[_0x35d023(0x144)][_0x35d023(0x11c)]([_0x42827e,lastTreePosition]);}}}else reticle['visible']=![];}}renderer[_0x35d023(0x105)](scene,camera);}
</script>
</body>
</html>
